#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ ExÃ©cution des vÃ©rifications avant commit..."

# VÃ©rifier la qualitÃ© du code backend
if [ -d "backend" ]; then
  echo "ğŸ” VÃ©rification du code backend..."
  cd backend
  mvn checkstyle:check
  if [ $? -ne 0 ]; then
    echo "âŒ Ã‰chec de la vÃ©rification du code backend"
    exit 1
  fi
  cd ..
fi

# VÃ©rifier la qualitÃ© du code frontend
if [ -d "frontend" ]; then
  echo "ğŸ” VÃ©rification du code frontend..."
  cd frontend
  npm run format:check
  if [ $? -ne 0 ]; then
    echo "âŒ Ã‰chec de la vÃ©rification du formatage du frontend"
    exit 1
  fi
  
  npm run lint
  if [ $? -ne 0 ]; then
    echo "âŒ Ã‰chec de l'analyse statique du frontend"
    exit 1
  fi
  cd ..
fi

echo "âœ… Toutes les vÃ©rifications sont passÃ©es avec succÃ¨s !"
exit 0
